{"ast":null,"code":"// client/src/pages/ImDrinking.js\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./ImDrinking.css';import Navbar from'../components/Navbar';import{getDrinks}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ImDrinking(){const navigate=useNavigate();const[drinks,setDrinks]=useState([]);const[selections,setSelections]=useState(['']);const[transitioning,setTransitioning]=useState(false);useEffect(()=>{async function fetchDrinks(){try{const data=await getDrinks();console.log(\"Fetched drinks:\",data);if(data&&data.success&&Array.isArray(data.drinks)){setDrinks(data.drinks);}else{setDrinks([]);}}catch(e){console.error(\"Error fetching drinks:\",e);setDrinks([]);}}fetchDrinks();},[]);const handleChange=(index,value)=>{const newSelections=[...selections];newSelections[index]=value;setSelections(newSelections);};const addRow=()=>{if(selections.length<5){setSelections([...selections,'']);}};const removeRow=index=>{if(selections.length>1){setSelections(selections.filter((_,i)=>i!==index));}};const handleSubmit=e=>{e.preventDefault();const selectedDrinks=selections.filter(s=>s.trim()!=='');if(selectedDrinks.length===0)return;// Apply fade-out effect before navigation\nsetTransitioning(true);setTimeout(()=>{navigate(\"/drink-diagram?drinks=\".concat(encodeURIComponent(JSON.stringify(selectedDrinks))));},300);};// Decide whether to apply the \"expanded\" class based on number of rows.\n// (You can adjust this logic as needed.)\nconst containerClass=selections.length>1?\"im-drinking-content expanded\":\"im-drinking-content\";return/*#__PURE__*/_jsxs(\"div\",{className:\"im-drinking-container \".concat(transitioning?'fade-out':''),children:[/*#__PURE__*/_jsx(Navbar,{onSignOut:()=>{localStorage.removeItem('bacshotsUser');window.location.href='/signin';}}),/*#__PURE__*/_jsxs(\"div\",{className:containerClass,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"I'm drinking\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[selections.map((sel,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"drink-row\",children:[/*#__PURE__*/_jsxs(\"select\",{value:sel,onChange:e=>handleChange(index,e.target.value),className:\"drink-dropdown\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Select a drink\"}),drinks.map(drink=>/*#__PURE__*/_jsx(\"option\",{value:drink.name,children:drink.name},drink._id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row-buttons\",children:[index===selections.length-1&&selections.length<5&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"add-btn\",onClick:addRow,children:\"+\"}),selections.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-btn\",onClick:()=>removeRow(index),children:\"-\"})]})]},index)),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"Tonight\"})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Navbar","getDrinks","jsx","_jsx","jsxs","_jsxs","ImDrinking","navigate","drinks","setDrinks","selections","setSelections","transitioning","setTransitioning","fetchDrinks","data","console","log","success","Array","isArray","e","error","handleChange","index","value","newSelections","addRow","length","removeRow","filter","_","i","handleSubmit","preventDefault","selectedDrinks","s","trim","setTimeout","concat","encodeURIComponent","JSON","stringify","containerClass","className","children","onSignOut","localStorage","removeItem","window","location","href","onSubmit","map","sel","onChange","target","disabled","drink","name","_id","type","onClick"],"sources":["C:/Users/melkote/Downloads/ActuallyAlmostFinalizedWaite-main1/ActuallyAlmostFinalizedWaite-main/client/src/pages/ImDrinking.js"],"sourcesContent":["// client/src/pages/ImDrinking.js\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './ImDrinking.css';\nimport Navbar from '../components/Navbar';\nimport { getDrinks } from '../api';\n\nexport default function ImDrinking() {\n  const navigate = useNavigate();\n  const [drinks, setDrinks] = useState([]);\n  const [selections, setSelections] = useState(['']);\n  const [transitioning, setTransitioning] = useState(false);\n\n  useEffect(() => {\n    async function fetchDrinks() {\n      try {\n        const data = await getDrinks();\n        console.log(\"Fetched drinks:\", data);\n        if (data && data.success && Array.isArray(data.drinks)) {\n          setDrinks(data.drinks);\n        } else {\n          setDrinks([]);\n        }\n      } catch (e) {\n        console.error(\"Error fetching drinks:\", e);\n        setDrinks([]);\n      }\n    }\n    fetchDrinks();\n  }, []);\n\n  const handleChange = (index, value) => {\n    const newSelections = [...selections];\n    newSelections[index] = value;\n    setSelections(newSelections);\n  };\n\n  const addRow = () => {\n    if (selections.length < 5) {\n      setSelections([...selections, '']);\n    }\n  };\n\n  const removeRow = (index) => {\n    if (selections.length > 1) {\n      setSelections(selections.filter((_, i) => i !== index));\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const selectedDrinks = selections.filter(s => s.trim() !== '');\n    if (selectedDrinks.length === 0) return;\n    // Apply fade-out effect before navigation\n    setTransitioning(true);\n    setTimeout(() => {\n      navigate(`/drink-diagram?drinks=${encodeURIComponent(JSON.stringify(selectedDrinks))}`);\n    }, 300);\n  };\n\n  // Decide whether to apply the \"expanded\" class based on number of rows.\n  // (You can adjust this logic as needed.)\n  const containerClass = selections.length > 1 ? \"im-drinking-content expanded\" : \"im-drinking-content\";\n\n  return (\n    <div className={`im-drinking-container ${transitioning ? 'fade-out' : ''}`}>\n      <Navbar onSignOut={() => {\n        localStorage.removeItem('bacshotsUser');\n        window.location.href = '/signin';\n      }} />\n      <div className={containerClass}>\n        <h1>I'm drinking</h1>\n        <form onSubmit={handleSubmit}>\n          {selections.map((sel, index) => (\n            <div key={index} className=\"drink-row\">\n              <select \n                value={sel} \n                onChange={(e) => handleChange(index, e.target.value)}\n                className=\"drink-dropdown\"\n              >\n                <option value=\"\" disabled>Select a drink</option>\n                {drinks.map((drink) => (\n                  <option key={drink._id} value={drink.name}>\n                    {drink.name}\n                  </option>\n                ))}\n              </select>\n              <div className=\"row-buttons\">\n                {index === selections.length - 1 && selections.length < 5 && (\n                  <button type=\"button\" className=\"add-btn\" onClick={addRow}>+</button>\n                )}\n                {selections.length > 1 && (\n                  <button type=\"button\" className=\"remove-btn\" onClick={() => removeRow(index)}>-</button>\n                )}\n              </div>\n            </div>\n          ))}\n          <button type=\"submit\" className=\"submit-btn\">Tonight</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}