{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useSearchParams,useNavigate}from'react-router-dom';import'./DrinkDiagram.css';import Navbar from'../components/Navbar';import UserInfoModal from'../components/UserInfoModal';import{getDrinks}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RingDiagram(_ref){let{percentage}=_ref;const radius=60;const circumference=2*Math.PI*radius;const offset=circumference-percentage/100*circumference;return/*#__PURE__*/_jsxs(\"svg\",{width:\"150\",height:\"150\",className:\"ring-diagram\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"ring-background\",stroke:\"#eee\",strokeWidth:\"12\",fill:\"transparent\",r:radius,cx:\"75\",cy:\"75\"}),/*#__PURE__*/_jsx(\"circle\",{className:\"ring-progress\",stroke:\"#3f51b5\",strokeWidth:\"12\",fill:\"transparent\",r:radius,cx:\"75\",cy:\"75\",strokeDasharray:circumference,strokeDashoffset:offset}),/*#__PURE__*/_jsxs(\"text\",{x:\"75\",y:\"80\",textAnchor:\"middle\",fontSize:\"20\",fill:\"#333\",children:[percentage,\"%\"]})]});}export default function DrinkDiagram(){var _user,_user2;const[searchParams]=useSearchParams();const drinksParam=searchParams.get('drinks');let selectedDrinks=[];try{selectedDrinks=drinksParam?JSON.parse(decodeURIComponent(drinksParam)):[];}catch(e){selectedDrinks=[];}const navigate=useNavigate();const[userInfoModalOpen,setUserInfoModalOpen]=useState(false);const[allowedDetails,setAllowedDetails]=useState({});const[drinkData,setDrinkData]=useState([]);const[explanationOpen,setExplanationOpen]=useState(false);const[explanationClosing,setExplanationClosing]=useState(false);const[useDragContainer,setUseDragContainer]=useState(false);// Ref for drag scroll (always enabled if more than one card)\nconst containerRef=useRef(null);const isDraggingRef=useRef(false);const dragThreshold=5;// Retrieve user from localStorage\nconst storedUser=localStorage.getItem('bacshotsUser');let user=storedUser?JSON.parse(storedUser):null;// Fetch drink details from backend\nuseEffect(()=>{async function fetchDrinks(){const data=await getDrinks();if(data&&data.success&&Array.isArray(data.drinks)){setDrinkData(data.drinks);}else{setDrinkData([]);}}fetchDrinks();},[]);// Decide whether to use a drag container if more than one card\nuseEffect(()=>{setUseDragContainer(selectedDrinks.length>1);},[selectedDrinks]);// Update allowed details when user's weight/sex or drinkData/selectedDrinks change.\nuseEffect(()=>{// To avoid infinite loops, we use only user.weight, user.sex and JSON stringified versions of the arrays.\nif(!user||!user.weight||!user.sex){setUserInfoModalOpen(true);}else{calculateAllowed();}},[(_user=user)===null||_user===void 0?void 0:_user.weight,(_user2=user)===null||_user2===void 0?void 0:_user2.sex,JSON.stringify(selectedDrinks),JSON.stringify(drinkData)]);const calculateAllowed=()=>{// Dummy formula:\n// Maximum allowed alcohol (in grams) = user.weight * 0.1\n// Alcohol in ml = allowedAlcoholGrams / 0.79\nconst weightFactor=user.weight/150;const sexFactor=user.sex==='male'?1:0.8;const allowedAlcoholGrams=user.weight*0.1;const alcoholML=allowedAlcoholGrams/0.79;const newAllowed={};selectedDrinks.forEach(drinkName=>{// Look up drink details from drinkData using name\nconst drinkObj=drinkData.find(d=>d.name===drinkName);let drinkAbv,volume;if(drinkObj){drinkAbv=drinkObj.abv;volume=drinkObj.volume;}else{drinkAbv=5;volume=355;}const allowedPercentage=Math.min(100,Math.round(weightFactor*sexFactor*50/drinkAbv));const numberOfDrinks=alcoholML/volume;newAllowed[drinkName]={percentage:allowedPercentage,allowedAlcoholGrams:allowedAlcoholGrams.toFixed(2),alcoholML:alcoholML.toFixed(2),numberOfDrinks:numberOfDrinks.toFixed(2),volume};});setAllowedDetails(newAllowed);};const handleUserInfoUpdate=newUserData=>{user={...user,...newUserData};localStorage.setItem('bacshotsUser',JSON.stringify(user));setUserInfoModalOpen(false);calculateAllowed();};// Drag scroll functionality for the cards container (if using drag container)\nuseEffect(()=>{if(!useDragContainer)return;const container=containerRef.current;if(!container)return;let isDown=false;let startX=0;let scrollLeft=0;const mouseDownHandler=e=>{isDown=true;isDraggingRef.current=false;startX=e.pageX-container.offsetLeft;scrollLeft=container.scrollLeft;};const mouseLeaveHandler=()=>{isDown=false;};const mouseUpHandler=()=>{isDown=false;};const mouseMoveHandler=e=>{if(!isDown)return;const x=e.pageX-container.offsetLeft;const walk=x-startX;if(Math.abs(walk)>dragThreshold){isDraggingRef.current=true;}container.scrollLeft=scrollLeft-walk;};container.addEventListener('mousedown',mouseDownHandler);container.addEventListener('mouseleave',mouseLeaveHandler);container.addEventListener('mouseup',mouseUpHandler);container.addEventListener('mousemove',mouseMoveHandler);return()=>{container.removeEventListener('mousedown',mouseDownHandler);container.removeEventListener('mouseleave',mouseLeaveHandler);container.removeEventListener('mouseup',mouseUpHandler);container.removeEventListener('mousemove',mouseMoveHandler);};},[useDragContainer]);// Card click handler: only trigger if not dragging.\nconst handleCardClick=()=>{if(!isDraggingRef.current){setExplanationOpen(true);}isDraggingRef.current=false;};// Handle closing the explanation popup with reverse animation.\nconst closeExplanation=()=>{setExplanationClosing(true);setTimeout(()=>{setExplanationOpen(false);setExplanationClosing(false);},300);};return/*#__PURE__*/_jsxs(\"div\",{className:\"drink-diagram-container\",children:[/*#__PURE__*/_jsx(Navbar,{onSignOut:()=>{localStorage.removeItem('bacshotsUser');window.location.href='/signin';}}),/*#__PURE__*/_jsxs(\"div\",{className:\"drink-diagram-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Tonight, you're drinking:\"}),/*#__PURE__*/_jsx(\"div\",{ref:useDragContainer?containerRef:null,className:useDragContainer?\"cards-container\":\"cards-container static\",children:selectedDrinks.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No drink selected.\"}):selectedDrinks.map((drink,idx)=>{const details=allowedDetails[drink]||{percentage:0,allowedAlcoholGrams:\"0\",alcoholML:\"0\",numberOfDrinks:\"0\",volume:0};return/*#__PURE__*/_jsxs(\"div\",{className:\"drink-entry\",onClick:handleCardClick,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"drink-name\",children:drink}),/*#__PURE__*/_jsx(RingDiagram,{percentage:details.percentage}),/*#__PURE__*/_jsxs(\"div\",{className:\"drink-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Allowed Percentage:\"}),\" \",details.percentage,\"%\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Allowed Alcohol:\"}),\" \",details.allowedAlcoholGrams,\" grams, which is \",details.alcoholML,\" ml\",/*#__PURE__*/_jsx(\"br\",{}),\"(Alcohol in ml = grams / 0.79)\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Equivalent Drinks:\"}),\" \",details.numberOfDrinks,\" drinks\",/*#__PURE__*/_jsx(\"br\",{}),\"(Calculated as: alcohol ml / \",details.volume,\" ml)\"]})]})]},idx);})}),/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:()=>navigate('/im-drinking'),children:\"Back\"})]}),explanationOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"explanation-modal-overlay \".concat(explanationClosing?'closing':''),onClick:closeExplanation,children:/*#__PURE__*/_jsxs(\"div\",{className:\"explanation-modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Understanding Allowed Percentage\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Allowed Percentage\"}),\" is a simplified metric that shows how much of your maximum allowable alcohol intake (based on your weight and sex) is allocated for this drink given its strength (ABV). A lower percentage means that a stronger drink uses more of your alcohol limit.\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Additionally:\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Alcohol in ml\"}),\" = (Allowed alcohol in grams) / 0.79\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Equivalent Drinks\"}),\" = (Alcohol in ml) / (Volume of the drink in ml)\"]})]})]})}),userInfoModalOpen&&/*#__PURE__*/_jsx(UserInfoModal,{onClose:handleUserInfoUpdate})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useSearchParams","useNavigate","Navbar","UserInfoModal","getDrinks","jsx","_jsx","jsxs","_jsxs","RingDiagram","_ref","percentage","radius","circumference","Math","PI","offset","width","height","className","children","stroke","strokeWidth","fill","r","cx","cy","strokeDasharray","strokeDashoffset","x","y","textAnchor","fontSize","DrinkDiagram","_user","_user2","searchParams","drinksParam","get","selectedDrinks","JSON","parse","decodeURIComponent","e","navigate","userInfoModalOpen","setUserInfoModalOpen","allowedDetails","setAllowedDetails","drinkData","setDrinkData","explanationOpen","setExplanationOpen","explanationClosing","setExplanationClosing","useDragContainer","setUseDragContainer","containerRef","isDraggingRef","dragThreshold","storedUser","localStorage","getItem","user","fetchDrinks","data","success","Array","isArray","drinks","length","weight","sex","calculateAllowed","stringify","weightFactor","sexFactor","allowedAlcoholGrams","alcoholML","newAllowed","forEach","drinkName","drinkObj","find","d","name","drinkAbv","volume","abv","allowedPercentage","min","round","numberOfDrinks","toFixed","handleUserInfoUpdate","newUserData","setItem","container","current","isDown","startX","scrollLeft","mouseDownHandler","pageX","offsetLeft","mouseLeaveHandler","mouseUpHandler","mouseMoveHandler","walk","abs","addEventListener","removeEventListener","handleCardClick","closeExplanation","setTimeout","onSignOut","removeItem","window","location","href","ref","map","drink","idx","details","onClick","concat","stopPropagation","onClose"],"sources":["C:/Users/melkote/Downloads/ActuallyAlmostFinalizedWaite-main1/ActuallyAlmostFinalizedWaite-main/client/src/pages/DrinkDiagram.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport './DrinkDiagram.css';\nimport Navbar from '../components/Navbar';\nimport UserInfoModal from '../components/UserInfoModal';\nimport { getDrinks } from '../api';\n\nfunction RingDiagram({ percentage }) {\n  const radius = 60;\n  const circumference = 2 * Math.PI * radius;\n  const offset = circumference - (percentage / 100) * circumference;\n  return (\n    <svg width=\"150\" height=\"150\" className=\"ring-diagram\">\n      <circle\n        className=\"ring-background\"\n        stroke=\"#eee\"\n        strokeWidth=\"12\"\n        fill=\"transparent\"\n        r={radius}\n        cx=\"75\"\n        cy=\"75\"\n      />\n      <circle\n        className=\"ring-progress\"\n        stroke=\"#3f51b5\"\n        strokeWidth=\"12\"\n        fill=\"transparent\"\n        r={radius}\n        cx=\"75\"\n        cy=\"75\"\n        strokeDasharray={circumference}\n        strokeDashoffset={offset}\n      />\n      <text x=\"75\" y=\"80\" textAnchor=\"middle\" fontSize=\"20\" fill=\"#333\">\n        {percentage}%\n      </text>\n    </svg>\n  );\n}\n\nexport default function DrinkDiagram() {\n  const [searchParams] = useSearchParams();\n  const drinksParam = searchParams.get('drinks');\n  let selectedDrinks = [];\n  try {\n    selectedDrinks = drinksParam ? JSON.parse(decodeURIComponent(drinksParam)) : [];\n  } catch (e) {\n    selectedDrinks = [];\n  }\n  const navigate = useNavigate();\n  const [userInfoModalOpen, setUserInfoModalOpen] = useState(false);\n  const [allowedDetails, setAllowedDetails] = useState({});\n  const [drinkData, setDrinkData] = useState([]);\n  const [explanationOpen, setExplanationOpen] = useState(false);\n  const [explanationClosing, setExplanationClosing] = useState(false);\n  const [useDragContainer, setUseDragContainer] = useState(false);\n\n  // Ref for drag scroll (always enabled if more than one card)\n  const containerRef = useRef(null);\n  const isDraggingRef = useRef(false);\n  const dragThreshold = 5;\n\n  // Retrieve user from localStorage\n  const storedUser = localStorage.getItem('bacshotsUser');\n  let user = storedUser ? JSON.parse(storedUser) : null;\n\n  // Fetch drink details from backend\n  useEffect(() => {\n    async function fetchDrinks() {\n      const data = await getDrinks();\n      if (data && data.success && Array.isArray(data.drinks)) {\n        setDrinkData(data.drinks);\n      } else {\n        setDrinkData([]);\n      }\n    }\n    fetchDrinks();\n  }, []);\n\n  // Decide whether to use a drag container if more than one card\n  useEffect(() => {\n    setUseDragContainer(selectedDrinks.length > 1);\n  }, [selectedDrinks]);\n\n  // Update allowed details when user's weight/sex or drinkData/selectedDrinks change.\n  useEffect(() => {\n    // To avoid infinite loops, we use only user.weight, user.sex and JSON stringified versions of the arrays.\n    if (!user || !user.weight || !user.sex) {\n      setUserInfoModalOpen(true);\n    } else {\n      calculateAllowed();\n    }\n  }, [user?.weight, user?.sex, JSON.stringify(selectedDrinks), JSON.stringify(drinkData)]);\n\n  const calculateAllowed = () => {\n    // Dummy formula:\n    // Maximum allowed alcohol (in grams) = user.weight * 0.1\n    // Alcohol in ml = allowedAlcoholGrams / 0.79\n    const weightFactor = user.weight / 150;\n    const sexFactor = user.sex === 'male' ? 1 : 0.8;\n    const allowedAlcoholGrams = user.weight * 0.1;\n    const alcoholML = allowedAlcoholGrams / 0.79;\n    const newAllowed = {};\n    selectedDrinks.forEach((drinkName) => {\n      // Look up drink details from drinkData using name\n      const drinkObj = drinkData.find(d => d.name === drinkName);\n      let drinkAbv, volume;\n      if (drinkObj) {\n        drinkAbv = drinkObj.abv;\n        volume = drinkObj.volume;\n      } else {\n        drinkAbv = 5;\n        volume = 355;\n      }\n      const allowedPercentage = Math.min(100, Math.round((weightFactor * sexFactor * 50) / drinkAbv));\n      const numberOfDrinks = alcoholML / volume;\n      newAllowed[drinkName] = {\n        percentage: allowedPercentage,\n        allowedAlcoholGrams: allowedAlcoholGrams.toFixed(2),\n        alcoholML: alcoholML.toFixed(2),\n        numberOfDrinks: numberOfDrinks.toFixed(2),\n        volume\n      };\n    });\n    setAllowedDetails(newAllowed);\n  };\n\n  const handleUserInfoUpdate = (newUserData) => {\n    user = { ...user, ...newUserData };\n    localStorage.setItem('bacshotsUser', JSON.stringify(user));\n    setUserInfoModalOpen(false);\n    calculateAllowed();\n  };\n\n  // Drag scroll functionality for the cards container (if using drag container)\n  useEffect(() => {\n    if (!useDragContainer) return;\n    const container = containerRef.current;\n    if (!container) return;\n    let isDown = false;\n    let startX = 0;\n    let scrollLeft = 0;\n\n    const mouseDownHandler = (e) => {\n      isDown = true;\n      isDraggingRef.current = false;\n      startX = e.pageX - container.offsetLeft;\n      scrollLeft = container.scrollLeft;\n    };\n\n    const mouseLeaveHandler = () => {\n      isDown = false;\n    };\n\n    const mouseUpHandler = () => {\n      isDown = false;\n    };\n\n    const mouseMoveHandler = (e) => {\n      if (!isDown) return;\n      const x = e.pageX - container.offsetLeft;\n      const walk = x - startX;\n      if (Math.abs(walk) > dragThreshold) {\n        isDraggingRef.current = true;\n      }\n      container.scrollLeft = scrollLeft - walk;\n    };\n\n    container.addEventListener('mousedown', mouseDownHandler);\n    container.addEventListener('mouseleave', mouseLeaveHandler);\n    container.addEventListener('mouseup', mouseUpHandler);\n    container.addEventListener('mousemove', mouseMoveHandler);\n\n    return () => {\n      container.removeEventListener('mousedown', mouseDownHandler);\n      container.removeEventListener('mouseleave', mouseLeaveHandler);\n      container.removeEventListener('mouseup', mouseUpHandler);\n      container.removeEventListener('mousemove', mouseMoveHandler);\n    };\n  }, [useDragContainer]);\n\n  // Card click handler: only trigger if not dragging.\n  const handleCardClick = () => {\n    if (!isDraggingRef.current) {\n      setExplanationOpen(true);\n    }\n    isDraggingRef.current = false;\n  };\n\n  // Handle closing the explanation popup with reverse animation.\n  const closeExplanation = () => {\n    setExplanationClosing(true);\n    setTimeout(() => {\n      setExplanationOpen(false);\n      setExplanationClosing(false);\n    }, 300);\n  };\n\n  return (\n    <div className=\"drink-diagram-container\">\n      <Navbar onSignOut={() => {\n        localStorage.removeItem('bacshotsUser');\n        window.location.href = '/signin';\n      }} />\n      <div className=\"drink-diagram-content\">\n        <h1>Tonight, you're drinking:</h1>\n        <div\n          ref={useDragContainer ? containerRef : null}\n          className={useDragContainer ? \"cards-container\" : \"cards-container static\"}\n        >\n          {selectedDrinks.length === 0 ? (\n            <p>No drink selected.</p>\n          ) : (\n            selectedDrinks.map((drink, idx) => {\n              const details = allowedDetails[drink] || { percentage: 0, allowedAlcoholGrams: \"0\", alcoholML: \"0\", numberOfDrinks: \"0\", volume: 0 };\n              return (\n                <div key={idx} className=\"drink-entry\" onClick={handleCardClick}>\n                  <h2 className=\"drink-name\">{drink}</h2>\n                  <RingDiagram percentage={details.percentage} />\n                  <div className=\"drink-info\">\n                    <p><strong>Allowed Percentage:</strong> {details.percentage}%</p>\n                    <p>\n                      <strong>Allowed Alcohol:</strong> {details.allowedAlcoholGrams} grams, which is {details.alcoholML} ml<br />\n                      (Alcohol in ml = grams / 0.79)\n                    </p>\n                    <p>\n                      <strong>Equivalent Drinks:</strong> {details.numberOfDrinks} drinks<br />\n                      (Calculated as: alcohol ml / {details.volume} ml)\n                    </p>\n                  </div>\n                </div>\n              );\n            })\n          )}\n        </div>\n        <button className=\"back-btn\" onClick={() => navigate('/im-drinking')}>\n          Back\n        </button>\n      </div>\n      {explanationOpen && (\n        <div className={`explanation-modal-overlay ${explanationClosing ? 'closing' : ''}`} onClick={closeExplanation}>\n          <div className=\"explanation-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <h2>Understanding Allowed Percentage</h2>\n            <p>\n              <strong>Allowed Percentage</strong> is a simplified metric that shows how much of your maximum allowable alcohol intake (based on your weight and sex) is allocated for this drink given its strength (ABV). A lower percentage means that a stronger drink uses more of your alcohol limit.\n            </p>\n            <p>Additionally:</p>\n            <div>\n              <p><strong>Alcohol in ml</strong> = (Allowed alcohol in grams) / 0.79</p>\n              <p><strong>Equivalent Drinks</strong> = (Alcohol in ml) / (Volume of the drink in ml)</p>\n            </div>\n          </div>\n        </div>\n      )}\n      {userInfoModalOpen && <UserInfoModal onClose={handleUserInfoUpdate} />}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}